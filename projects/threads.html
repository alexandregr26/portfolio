<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alexandre's</title>
    <link rel="shortcut icon" type="image/png" href="../img/favicon.png">
    <!-- CSS file -->
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <!-- Boxicon Icons -->
    <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>
</head>

<header>
    <nav class="navbar fixed-top navbar-expand-lg navbar-light">
        <div id="navbar-container" class="container">
            <a class="navbar-brand" href="../index.html">
                <h1 class="nav-logo">Alexandre Gouveia Rodrigues</h1>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="mr-auto"></div>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a id="aboutText" class="nav-link" href="../index.html#1">About</a>
                    </li>
                    <li class="nav-item active">
                        <a id="workText" class="nav-link" href="../index.html#2">Work<span
                                class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a id="skillsText" class="nav-link" href="../index.html#3">Skills</a>
                    </li>
                    <li class="nav-item">
                        <a id="communityText" class="nav-link" href="../index.html#4">Community</a>
                    </li>
                    <li class="nav-item">
                        <a id="educationText" class="nav-link" href="../index.html#5">Education</a>
                    </li>
                    <li class="nav-item">
                        <a id="contactText" class="nav-link" href="../index.html#6">Contact</a>
                    </li>
                    <li class="nav-item">
                        <select id="list" onchange="getSelectValue();">
                            <option value="en">EN</option>
                            <option value="fr">FR</option>
                            <option value="pt">PT</option>
                            <option value="es">ES</option>
                        </select>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>


<body>
    <!-- Previous & Next Button -->
    <section class="mapping">
        <div id="mapping-about" class="container">
            <div class="mapping-div">
                <div class="mapping-back">
                    <a href="../projects/mappa.html"><i class='bx bx-left-arrow-alt'></i></a>
                    <div id="backText">Previous</div>
                </div>
                <div class="mapping-next">
                    <div id="nextText">Next</div>
                    <a href="../projects/file_transfer.html"><i class='bx bx-right-arrow-alt'></i></a>
                </div>
            </div>
        </div>
    </section>

    <!-- Main -->
    <section id="thread-banner">
        <div id="box-thread-banner" class="container">
            <h2 id="threads0Text">User-Level Thread Package</h2>
            <h2 id="threads1Text">&</h2>
            <h2 id="threads2Text">Multi-threaded Web Server</h2>
        </div>
    </section>

    <!-- Skills -->
    <section id="3" class="project-skills">
        <div id="box-project-skills" class="container">
            <div class="skillsHeader">
                <h1 id="skillsToolsUsedText" class="skills-project-title">Skills & Tools Used</h1>
            </div>
            <div id="skills-project-list" class="row">
                <div class="col-lg-2 col-md-4 col-sm-4 col-4">
                    <div id="project-skills-item">
                        <div class="imgcircle">
                            <img src="../img/clogo1.png" class="skill-icon" alt="">
                        </div>
                        <h2>C</h2>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-sm-4 col-4">
                    <div id="project-skills-item">
                        <div class="imgcircle">
                            <img src="../img/git.png" class="skill-icon" alt="">
                        </div>
                        <h2>Git</h2>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-sm-4 col-4">
                    <div id="project-skills-item">
                        <div class="imgcircle">
                            <img src="../img/posix.jpg" class="skill-icon" alt="">
                        </div>
                        <h2>POSIX API</h2>
                    </div>
                </div>
            </div>
    </section>

    <!-- Project Info -->
    <section class="about">
        <div id="box-about" class="container">
            <h1 id="projectInfoText0" class="mappa-subtitle">Project Information</h1>
            <div class="row">
                <div id="community-struct" class="col-lg-6 col-md-6 col-sm-12 col-xs-6">
                    <div id="community-item">
                        <p id="projectInfoText1"> These projects were designed by the University of Toronto's ECE344
                            Operating Systems staff to help students gain a deeper understanding of threads, processes,
                            and concurrency. In the first project, I built a preemptive, user-level thread package with
                            mutex locks
                            and condition variables to simulate concurrency on processors.</p>
                    </div>
                </div>
                <div id="community-struct" class="col-lg-6 col-md-6 col-sm-12 col-xs-6">
                    <div id="community-item">
                        <p id="projectInfoText2"> In the second project, I developed a caching, multi-threaded web
                            server to enable
                            parallelism. This was done by creating a fixed-size pool of worker threads that handled HTTP
                            requests upon arrival, and by caching files that were recently requested in memory. This
                            implementation improved the run time of the original code by over 55%.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Team -->
    <section class="sectionArea">
        <div id="box-mappa" class="container">
            <h1 id="codeText0" class="mappa-subtitle">The Code</h1>
            <div id="community-list" class="row">
                <div id="community-struct" class="col-lg-12 col-md-12 col-sm-12 col-xs-6">
                    <div id="community-item">
                        <p id="codeText1">The source code for the Thread Package and Caching Web Server are available on my Github page,
                            but on a private repository to encourage Academic Integrity. Please contact me if you wish to see the full code.</p>
                    </div>
                </div>
                <div id="community-struct" class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                    <h1 id="skillsToolsUsedText" class="thread-project-title">Thread Package</h1>
                    <!-- HTML generated using hilite.me -->
                    <div
                        style="background: #f8f8f8; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
                        <pre style="margin: 0; line-height: 125%"><span style="color: #8f5902; font-style: italic">#include &quot;request.h&quot;</span>
<span style="color: #8f5902; font-style: italic">#include &quot;server_thread.h&quot;</span>
<span style="color: #8f5902; font-style: italic">#include &quot;common.h&quot;</span>
<span style="color: #8f5902; font-style: italic">#include &lt;pthread.h&gt;</span>

<span style="color: #8f5902; font-style: italic">// Global Variables</span>

<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">CAPACITY</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #0000cf; font-weight: bold">50000000</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">HEAD</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #0000cf; font-weight: bold">0</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">TAIL</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #0000cf; font-weight: bold">1</span><span style="color: #000000; font-weight: bold">;</span>

<span style="color: #8f5902; font-style: italic">// Data Structures</span>

<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">server</span> <span style="color: #000000; font-weight: bold">{</span>
	<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">nr_threads</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">max_requests</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">max_cache_size</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">exiting</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">int</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">buffer</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">bufferSize</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">in</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">out</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">pthread_t</span><span style="color: #ce5c00; font-weight: bold">**</span> <span style="color: #000000">workerThreads</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">pthread_mutex_t</span> <span style="color: #000000">mutex</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">pthread_cond_t</span> <span style="color: #000000">full</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">pthread_cond_t</span> <span style="color: #000000">empty</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">cache</span> <span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">cache</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">pthread_mutex_t</span> <span style="color: #000000">cache_mutex</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #000000; font-weight: bold">};</span>

<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">node</span> <span style="color: #000000; font-weight: bold">{</span>
	<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">file_data</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">data</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">node</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">next</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #000000; font-weight: bold">};</span>

<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">cache</span> <span style="color: #000000; font-weight: bold">{</span>
	<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">node</span><span style="color: #ce5c00; font-weight: bold">**</span> <span style="color: #000000">leader</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">lru_node</span> <span style="color: #ce5c00; font-weight: bold">**</span> <span style="color: #000000">lru</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">amountUsed</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #000000; font-weight: bold">};</span>

<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">lru_node</span> <span style="color: #000000; font-weight: bold">{</span>
	<span style="color: #204a87; font-weight: bold">char</span> <span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">filename</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">lru_node</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">prev</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">lru_node</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">next</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #000000; font-weight: bold">};</span>

<span style="color: #8f5902; font-style: italic">/* helper function declarations */</span>

<span style="color: #204a87; font-weight: bold">void</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">threadFunction</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">void</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">sv</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">hashFunction</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">char</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">str</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">cache</span> <span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">cache_init</span><span style="color: #000000; font-weight: bold">();</span>
<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">file_data</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">cache_lookup</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">server</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">sv</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">char</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">filename</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">arrayElement</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000">cache_insert</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">server</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">sv</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">file_data</span><span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">data</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">arrayElement</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000">cache_evict</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">server</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">sv</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">amount</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">lru_node</span> <span style="color: #ce5c00; font-weight: bold">**</span> <span style="color: #000000">lru_init</span><span style="color: #000000; font-weight: bold">();</span>
<span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000">lru_add</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">server</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">sv</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">char</span> <span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">filename</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000">lru_delete</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">server</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">sv</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000">lru_update</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">server</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">sv</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">char</span> <span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">filename</span><span style="color: #000000; font-weight: bold">);</span>

<span style="color: #8f5902; font-style: italic">/* static functions declarations */</span>

<span style="color: #204a87; font-weight: bold">static</span> <span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">file_data</span> <span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">file_data_init</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">void</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">static</span> <span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000">file_data_free</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">file_data</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">data</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">static</span> <span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000">do_server_request</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">server</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">sv</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">connfd</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">server</span> <span style="color: #ce5c00; font-weight: bold">*</span> <span style="color: #000000">server_init</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">nr_threads</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">max_requests</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">max_cache_size</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000">server_request</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">server</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">sv</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">connfd</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000">server_exit</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">server</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">sv</span><span style="color: #000000; font-weight: bold">);</span>
</pre>
                    </div>
                </div>
                <div id="community-struct" class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                    <h1 id="skillsToolsUsedText" class="thread-project-title">Web Server</h1>
                    <!-- HTML generated using hilite.me -->
                    <div
                        style="background: #f8f8f8; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">
                        <pre style="margin: 0; line-height: 125%">
<span style="color: #8f5902; font-style: italic">#include &lt;stdlib.h&gt;</span>
<span style="color: #8f5902; font-style: italic">#include &lt;ucontext.h&gt;</span>
<span style="color: #8f5902; font-style: italic">#include &lt;stdbool.h&gt;</span>
<span style="color: #8f5902; font-style: italic">#include &quot;thread.h&quot;</span>

<span style="color: #8f5902; font-style: italic">// Global structures</span>

<span style="color: #8f5902; font-style: italic">/* This is the thread control block */</span>
<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #204a87; font-weight: bold">thread</span> <span style="color: #000000; font-weight: bold">{</span>
	<span style="color: #000000">Tid</span> <span style="color: #000000">id</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">status</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">void</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">stackPtr</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">bool</span> <span style="color: #000000">contextReturn</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">ucontext_t</span> <span style="color: #000000">mycontext</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #204a87; font-weight: bold">thread</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">next</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #000000; font-weight: bold">};</span>

<span style="color: #8f5902; font-style: italic">/* This is the ready queue structure */</span>
<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">ready_queue</span> <span style="color: #000000; font-weight: bold">{</span>
	<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #204a87; font-weight: bold">thread</span><span style="color: #ce5c00; font-weight: bold">**</span> <span style="color: #000000">scheduler</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #000000; font-weight: bold">};</span>

<span style="color: #8f5902; font-style: italic">/* This is the wait queue structure */</span>
<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">wait_queue</span> <span style="color: #000000; font-weight: bold">{</span>
	<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #204a87; font-weight: bold">thread</span><span style="color: #ce5c00; font-weight: bold">**</span> <span style="color: #000000">scheduler</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #000000; font-weight: bold">};</span>

<span style="color: #8f5902; font-style: italic">/* This is the lock structure */</span>
<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">lock</span> <span style="color: #000000; font-weight: bold">{</span>
	<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">wait_queue</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">lockWq</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #000000">Tid</span> <span style="color: #000000">lockOwner</span><span style="color: #000000; font-weight: bold">;</span>
	<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">inUse</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #000000; font-weight: bold">};</span>

<span style="color: #8f5902; font-style: italic">/* This is the condition variable structure */</span>
<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">cv</span> <span style="color: #000000; font-weight: bold">{</span>
	<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">wait_queue</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">cvWq</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #000000; font-weight: bold">};</span>

<span style="color: #8f5902; font-style: italic">// Global Variables</span>

<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">READY</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #0000cf; font-weight: bold">0</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">RUNNING</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #0000cf; font-weight: bold">1</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">EXITED</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #0000cf; font-weight: bold">2</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">KILLED</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #0000cf; font-weight: bold">3</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">SLEEPING</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #0000cf; font-weight: bold">4</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">CURRENT</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #0000cf; font-weight: bold">0</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">HEAD</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #0000cf; font-weight: bold">1</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">TAIL</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #0000cf; font-weight: bold">2</span><span style="color: #000000; font-weight: bold">;</span>
<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">ZOMBIE</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #0000cf; font-weight: bold">3</span><span style="color: #000000; font-weight: bold">;</span>

<span style="color: #8f5902; font-style: italic">// Global Structures</span>

<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">wait_queue</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">waitQueueArray</span><span style="color: #000000; font-weight: bold">[</span><span style="color: #0000cf; font-weight: bold">129</span><span style="color: #000000; font-weight: bold">];</span>
<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">idArray</span> <span style="color: #000000; font-weight: bold">[</span><span style="color: #000000">THREAD_MAX_THREADS</span><span style="color: #000000; font-weight: bold">];</span>
<span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">ready_queue</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">readyQueue</span><span style="color: #000000; font-weight: bold">;</span>

<span style="color: #8f5902; font-style: italic">// Function declarations</span>

<span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000">thread_stub</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000; font-weight: bold">(</span><span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">thread_main</span><span style="color: #000000; font-weight: bold">)(</span><span style="color: #204a87; font-weight: bold">void</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000; font-weight: bold">),</span> <span style="color: #204a87; font-weight: bold">void</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">arg</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000">thread_init</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">void</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #000000">Tid</span> <span style="color: #000000">thread_id</span><span style="color: #000000; font-weight: bold">();</span>
<span style="color: #000000">Tid</span> <span style="color: #000000">thread_create</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000; font-weight: bold">(</span><span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">fn</span><span style="color: #000000; font-weight: bold">)</span> <span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">void</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000; font-weight: bold">),</span> <span style="color: #204a87; font-weight: bold">void</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">parg</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #000000">Tid</span> <span style="color: #000000">thread_yield</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">Tid</span> <span style="color: #000000">want_tid</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">void</span> <span style="color: #000000">thread_exit</span><span style="color: #000000; font-weight: bold">();</span>
<span style="color: #000000">Tid</span> <span style="color: #000000">thread_kill</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">Tid</span> <span style="color: #000000">tid</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #000000">Tid</span> <span style="color: #000000">thread_sleep</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">wait_queue</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">queue</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">thread_wakeup</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #204a87; font-weight: bold">struct</span> <span style="color: #000000">wait_queue</span> <span style="color: #ce5c00; font-weight: bold">*</span><span style="color: #000000">queue</span><span style="color: #000000; font-weight: bold">,</span> <span style="color: #204a87; font-weight: bold">int</span> <span style="color: #000000">all</span><span style="color: #000000; font-weight: bold">);</span>
<span style="color: #000000">Tid</span> <span style="color: #000000">thread_wait</span><span style="color: #000000; font-weight: bold">(</span><span style="color: #000000">Tid</span> <span style="color: #000000">tid</span><span style="color: #000000; font-weight: bold">);</span>
</pre>
                    </div>
                </div>
                <div id="community-struct" class="col-lg-12 col-md-12 col-sm-12 col-xs-6">
                    <div class="splitzbutton">
                        <a href="../projects/contact.html">
                            <button id="codeText2">See Full Code</button>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="6" class="footer-area">
        <div class="container">
            <div class="">
                <div class="social text-center">
                    <h5>Alexandre</h5>
                    <a target="_blank" href="https://www.linkedin.com/in/alexandre-gouveia-r/"><i
                            class='bx bxl-linkedin-square'></i></a>
                    <a href="../projects/contact.html"><i class='bx bx-envelope'></i></a>
                    <a target="_blank" href="https://github.com/alexandregr26"><i class='bx bxl-github'></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script src="../js/jquery.3.5.1.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/isotope.min.js"></script>
    <script
        src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=ruby&amp;skin=sunburst"></script>
    <script src="./threads.js"></script>
</body>

</html>